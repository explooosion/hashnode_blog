---
title: "Electron - æ–°æ‰‹å…¥é–€ - åšä¸€å€‹é¬§é˜å§"
seoTitle: "Electron - æ–°æ‰‹å…¥é–€ - åšä¸€å€‹é¬§é˜å§"
seoDescription: "é€™æ˜¯ä¸€ç¯‡é©åˆçµ¦æ–°æ‰‹çš„å…¥é–€é–‹ç™¼"
datePublished: Sun Mar 25 2018 00:00:00 GMT+0000 (Coordinated Universal Time)
cuid: cm6jbf2qa000g09lbee6t8cc9
slug: electron
cover: https://raw.githubusercontent.com/explooosion/blogs/refs/heads/main/docs/images/2018-03-25_Electron%20-%20%E6%96%B0%E6%89%8B%E5%85%A5%E9%96%80%20-%20%E5%81%9A%E4%B8%80%E5%80%8B%E9%AC%A7%E9%90%98%E5%90%A7/banner/1521965410_69325.gif
ogImage: https://raw.githubusercontent.com/explooosion/blogs/refs/heads/main/docs/images/2018-03-25_Electron%20-%20%E6%96%B0%E6%89%8B%E5%85%A5%E9%96%80%20-%20%E5%81%9A%E4%B8%80%E5%80%8B%E9%AC%A7%E9%90%98%E5%90%A7/banner/1521965410_69325.gif
tags: electron

---

é€™æ˜¯ä¸€ç¯‡é©åˆçµ¦æ–°æ‰‹çš„å…¥é–€é–‹ç™¼

### ğŸ“ å‰è¨€

é€™ä¸€ç¯‡ç®—å·²ç¶“é²ä¾†äº†ï¼Œ

ä»¥å‰é–‹ç™¼æ¡Œé¢æ‡‰ç”¨ç¨‹å¼éƒ½æ˜¯ç”¨ [WinForm](https://en.wikipedia.org/wiki/Windows_Forms)ï¼Œ

å¾Œä¾† [Electron](https://electronjs.org/) çš„ç†±é–€ï¼Œæ‰€ä»¥å°‡ä»¥å¾€è‡ªå·±å¯«çš„è»Ÿé«”é‡æ§‹ã€‚

åªæ˜¯ä¸€ç›´å¿˜è¨˜ç´€éŒ„æˆæ–‡ç« ã€‚

é€™ç¯‡æœƒå¾åŸºæœ¬çš„é–‹å§‹æ•™å­¸ï¼Œ

åŒ…å«å¦‚ä½•ç·¨è­¯æˆ Windows å¯åŸ·è¡Œæª”ï¼ˆ[.exe](https://en.wikipedia.org/wiki/.exe)ï¼‰ï¼Œ

ä»¥åŠæœ€å¾Œå¦‚ä½•å°è£èµ·ä¾†ï¼Œçµ¦åˆ¥äººé€²è¡Œå®‰è£ã€‚

### â° å±•ç¤º

æœ¬å°ˆæ¡ˆå°‡ä»¥ Windows ä½œç‚ºå¹³å°ï¼Œé–‹ç™¼ä¸€å€‹æ¡Œé¢çš„é€šçŸ¥ç¨‹å¼ï¼Œ

é€éæŒ‡å®šçš„æ™‚é–“ï¼Œç•¶æ™‚é–“åˆ°äº†çš„æ™‚å€™ï¼Œæœƒåœ¨å³ä¸‹è§’æé†’ã€‚

å®Œæ•´å°ˆæ¡ˆæ”¾ç½®æ–¼ Github -Â [electron-alarm-clock](https://github.com/explooosion/electron-alarm-clock)

DEMOï¼š

![1521965410_69325.gif](https://raw.githubusercontent.com/explooosion/blogs/refs/heads/main/docs/images/2018-03-25_Electron%20-%20%E6%96%B0%E6%89%8B%E5%85%A5%E9%96%80%20-%20%E5%81%9A%E4%B8%80%E5%80%8B%E9%AC%A7%E9%90%98%E5%90%A7/1521965410_69325.gif)

ğŸ“š æœ¬æ–‡ç›®éŒ„ï¼š
--------

1.  [Electron ä»‹ç´¹](#1)
2.  [å°ˆæ¡ˆå»ºç«‹](#2)
3.  [é¬§é˜æé†’ç¨‹å¼é–‹ç™¼](#3)
4.  [ç¨‹å¼ç·¨è­¯](#4)
5.  [ç¨‹å¼å°è£](#5)
6.  [å»ºç«‹æ¡Œé¢æ·å¾‘](#6)
7.  [åƒè€ƒè³‡æ–™](#7)

ä¸€ã€Electron ä»‹ç´¹
-------------

ä¾ç…§æ…£ä¾‹å…ˆçœ‹ä¸€ä¸‹ Logoï¼š

[![atom_electron.jpg](https://raw.githubusercontent.com/explooosion/blogs/refs/heads/main/docs/images/2018-03-25_Electron%20-%20%E6%96%B0%E6%89%8B%E5%85%A5%E9%96%80%20-%20%E5%81%9A%E4%B8%80%E5%80%8B%E9%AC%A7%E9%90%98%E5%90%A7/atom_electron.jpg)](http://blog.darkwing.co/wp-content/uploads/2016/10/atom_electron.jpg)

[Electron](https://electronjs.org/) æœ€æ—©åç¨±ç‚º [Atom Shell](https://electronjs.org/blog/electron)ï¼Œ

æ˜¯ç”± Github æ‰€é–‹ç™¼çš„é–‹æºæ¡†æ¶ï¼Œ

ä¸»è¦æ˜¯ä½¿ç”¨ [Node.js](https://nodejs.org/en/) å’Œ [Chromium](https://zh.wikipedia.org/wiki/Chromium) é€²è¡Œ GUI æ¡Œé¢ APP é–‹ç™¼ã€‚

ç”±æ–¼é–‹ç™¼ç’°å¢ƒå°±æ˜¯åŸºæ–¼ [Node.js](https://nodejs.org/en/)ï¼Œè«‹å‹™å¿…å®‰è£å¥½ã€‚

åœ¨å­¸ç¿’ä¸Šç•¶ç„¶å°±éœ€è¦å…·å‚™ä¸€é» Node.js åŸºç¤ï¼ŒåŒ…å« [npm](https://www.npmjs.com/)ã€[package.json](https://docs.npmjs.com/files/package.json) çš„èªçŸ¥èˆ‡æ“ä½œã€‚

å¦‚æœå° Node.js æ„Ÿåˆ°é™Œç”Ÿï¼Œæ¨è–¦çœ‹é€™ç¯‡æ–‡ç«  ğŸ˜®ï¼š

*   [2014 iT é‚¦å¹«å¿™éµäººè³½ -Â Node.js ç³»åˆ—å­¸ç¿’æ—¥èªŒÂ ç³»åˆ—](https://ithelp.ithome.com.tw/users/20024110/ironman/939)ï¼ˆä½œè€… [jou516](https://ithelp.ithome.com.tw/users/20024110/profile)ï¼‰

å¾ˆå¤šçŸ¥åçš„æ¡Œé¢æ‡‰ç”¨ç¨‹å¼éƒ½æ˜¯ä½¿ç”¨ Electron é–‹ç™¼çš„ä¾‹å¦‚ï¼š

*   [Github Desktop](https://desktop.github.com/)
*   [Discord](https://discordapp.com/)
*   [WordPress.com](https://wordpress.com/)
*   [Visual Studio Code](https://code.visualstudio.com/)
*   [Slack](https://slack.com/)
*   [Atom](https://atom.io/)

é—œæ–¼ Electron çš„å°å…«å¦

åªä¸éåŸ Electron çš„ç›¸é—œé–‹ç™¼äººå“¡ ğŸ‘¨ğŸ»â€ğŸ’»ï¼Œ

ç›®å‰å·²ç¶“é‡æ§‹ä¸¦è½‰ç§»åˆ°æ–°çš„å°ˆæ¡ˆé€²è¡Œé–‹ç™¼ - [Yue](https://github.com/yue/yue)Â ï¼ˆ[å®˜ç¶²](http://libyue.com/docs/v0.1.1/js/index.html)ï¼‰

æœ‰ç©ºä¹Ÿæœƒä¾†ç†Ÿæ‚‰ä¸‹ç©ç©çœ‹ [Yue](http://github.com/yue/yue) æƒ¹ï¼

äºŒã€å°ˆæ¡ˆå»ºç«‹
------

ä»¥ä¸‹å¯¦å‹™æ“ä½œå°‡å»ºç«‹ä¸€å€‹æ¡Œé¢é¬§é˜é€šçŸ¥æ‡‰ç”¨ç¨‹å¼ï¼Œ

å¦‚æœå°ç’°å¢ƒåˆå§‹å·²ç¶“ç†Ÿæ‚‰ï¼Œå¯ä»¥ç›´æ¥ clone å®˜æ–¹çš„Â [electron-quick-start](https://github.com/electron/electron-quick-start)ã€‚

é¦–å…ˆæˆ‘å€‘å»ºç«‹å°ˆæ¡ˆè³‡æ–™å¤¾ï¼Œä¸¦åˆå§‹åŒ–ï¼š

```bash
mkdir electron-alarm-clock && cd electron-alarm-clock
npm init -y
```

*   ä½ å¯ä»¥ç›´æ¥æ‰‹å‹•æ–°å¢è³‡æ–™å¤¾ï¼Œç„¶å¾Œé€²å…¥ï¼ˆå¯ä»¥ä¸ç”¨é€™éº¼å·¥ç¨‹å¸«çš„æ–¹å¼ï¼‰
*   é€²å…¥å°ˆæ¡ˆå¾Œä½¿ç”¨çµ‚ç«¯æ©Ÿè¼¸å…¥Â npm init -y é€²è¡Œåˆå§‹å°ˆæ¡ˆï¼ˆ-y æ˜¯å°‡è©¢å•çš„æ¢ä»¶é€šé€šé»˜èª yesï¼‰

å®‰è£Â electronï¼š

```bash
npm install --save--dev electron
```

*   \--save-dev æœƒå°‡æŒ‡å®šå¥—ä»¶å­˜æ–¼ package.json çš„Â devDependencies
*   å› ç‚ºÂ electron åªæœ‰é–‹ç™¼éšæ®µæ‰éœ€è¦ç”¨åˆ°ï¼Œå› æ­¤åªéœ€è¦Â --save--dev

ä¿®æ”¹ç¨‹å¼é€²å…¥é»ä½ç½®ï¼š

åœ¨Â main çš„éƒ¨åˆ†ï¼Œå°‡ index.js æ”¹ç‚º main.jsã€‚

åœ¨ script çš„éƒ¨åˆ†ï¼Œæ–°å¢ startã€‚

\[ package.json \]

```json
{
  "name": "electron-alarm-clock",
  "version": "1.0.0",
  "description": "",
  "main": "main.js",
  "scripts": {
    "start": "electron ."
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "devDependencies": {
    "electron": "^1.8.4"
  }
}
```

å»ºç«‹ä¸»ç¨‹å¼ï¼Œå› æ­¤æ–°å¢æª”æ¡ˆ main.jsï¼š

ç¨‹å¼èªªæ˜éƒ½åœ¨è¨»è§£ä¸­ï¼Œå°±ä¸å†èªªæ˜äº†ğŸ˜–ï½

\[ main.js \]

```javascript
const {
    app,
    BrowserWindow,
} = require('electron')

const path = require('path')
const url = require('url')

app.on('ready', createWindow)

app.on('window-all-closed', () => {
    // darwin = MacOS
    if (process.platform !== 'darwin') {
        app.quit()
    }
})

app.on('activate', () => {
    if (win === null) {
        createWindow()
    }
})

function createWindow() {
    // Create the browser window.
    win = new BrowserWindow({
        width: 400,
        height: 400,
        maximizable: false
    })

    win.loadURL(url.format({
        pathname: path.join(__dirname, 'index.html'),
        protocol: 'file:',
        slashes: true
    }))

    // Open DevTools.
    // win.webContents.openDevTools()

    // When Window Close.
    win.on('closed', () => {
        win = null
    })

}
```

åœ¨ main.js ä¸­æˆ‘å€‘æŒ‡å®šç•«é¢ä¾†æºç‚º index.htmlï¼Œ

\[ index.html \]

```html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Electron</title>
</head>

<body>
    <h1>Hello Electron</h1>
    <p>Node Version:
        <script>document.write(process.versions.node)</script>
    </p>
    <p>Chrome Version:
        <script>document.write(process.versions.chrome)</script>
    </p>
    <p>Electron Version:
        <script>document.write(process.versions.electron)</script>
    </p>
</body>

</html>
```

*   åœ¨ script ä¸­ï¼Œæˆ‘å€‘å¯ä»¥èª¿ç”¨ node.js çš„ç‰©ä»¶ï¼Œåœ¨é€™é‚Šæˆ‘å€‘ç¯„ä¾‹ä½¿ç”¨ [process](https://nodejs.org/api/process.html#process_process)ã€‚

é‹è¡Œçµæœï¼š

```bash
npm start
```

![1521964923_84229.png](https://raw.githubusercontent.com/explooosion/blogs/refs/heads/main/docs/images/2018-03-25_Electron%20-%20%E6%96%B0%E6%89%8B%E5%85%A5%E9%96%80%20-%20%E5%81%9A%E4%B8%80%E5%80%8B%E9%AC%A7%E9%90%98%E5%90%A7/1521964923_84229.png)

ä»¥ä¸Šæˆ‘å€‘å®Œæˆäº†åŸºæœ¬çš„ç’°å¢ƒèˆ‡å°ˆæ¡ˆå»ºç«‹ã€‚

ä¸‰ã€é¬§é˜æé†’ç¨‹å¼é–‹ç™¼
----------

é€™é‚ŠåŸºæœ¬ä¸Šå¯ä»¥è‡ªè¡Œé–‹ç™¼å‰µä½œï¼Œ

ä»¥ä¸‹åŠŸèƒ½æœƒé€²è¡Œæ™‚é–“çš„åµæ¸¬ï¼Œä¸¦é€é [Notification](https://developer.mozilla.org/zh-TW/docs/Web/API/notification) é€²è¡Œæé†’ã€‚

### å…ƒç´ å¸ƒç½®

é¦–å…ˆæ”¾ç½®ã€Œé¡¯ç¤ºç•¶å‰æ™‚é–“çš„å…ƒç´ ã€ã€ã€Œå¯è¼¸å…¥æ™‚é–“çš„è¼¸å…¥æ–¹å¡Šã€ï¼Œ

ä»¥åŠè¼‰å…¥ç•«é¢ç«¯ä¸»ç¨‹å¼ app.js

```html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Electron</title>
</head>

<body>
    <h1>Hello Electron</h1>
    <p>Node Version:
        <script>document.write(process.versions.node)</script>
    </p>
    <p>Chrome Version:
        <script>document.write(process.versions.chrome)</script>
    </p>
    <p>Electron Version:
        <script>document.write(process.versions.electron)</script>
    </p>
    <hr>
    <div class="now-time"></div>
    <input type="text" class="alarm-time">

    <script src="app.js"></script>
</body>

</html>
```

### é¡¯ç¤ºæ™‚é–“ä¸¦ä¸æ–·åœ°æ›´æ–°

åœ¨æ™‚é–“æ“ä½œä¸Šï¼Œæˆ‘å€‘ä½¿ç”¨å¥—ä»¶ [moment.js](https://momentjs.com/)Â â±ï¼Œæ¯”è¼ƒæ–¹ä¾¿æ“ä½œã€‚

```bash
npm install --save moment
```

\[ app.js \]

```javascript
const moment = require('moment')

const elNow = document.querySelector('.now-time')
const elAlarm = document.querySelector('.alarm-time')
elAlarm.addEventListener('change', onAlarmTextChange)

let time = moment()

let nowTime
let alarmTime

/** Set Time */
const now = moment(time).format('HH:mm:ss')
nowTime = now
elNow.innerText = now

const alarm = moment(time).add(5, 'seconds').format('HH:mm:ss')
alarmTime = alarm
elAlarm.value = alarm

timer()

/** Now Time */
function timer() {
    time = moment().format('HH:mm:ss')

    /** Set Now */
    nowTime = time
    elNow.innerText = time

    setTimeout(() => {
        timer()
    }, 1000)
}

/**
 * Save To Global Variable,
 * Can't Read Dom In Minimize Status.
 * @param {event} event
 */
function onAlarmTextChange(event) {
    alarmTime = event.target.value
}
```

*   æé†’æ™‚é–“ï¼šé è¨­ç•¶å‰æ™‚é–“éå¾Œ 5 ç§’
*   nowTimeï¼šæŠŠç•¶å‰æ™‚é–“å­˜æˆå…¨åŸŸè®Šæ•¸
    
*   alarmTimeï¼šæŠŠæé†’æ™‚é–“å­˜æˆå…¨åŸŸè®Šæ•¸
    

å¯ä»¥çœ‹åˆ°ä¸æ–·åœ°æ›´æ–°ç•¶å‰æ™‚é–“ã€‚

```bash
npm start
```

![1521965944_30717.gif](https://raw.githubusercontent.com/explooosion/blogs/refs/heads/main/docs/images/2018-03-25_Electron%20-%20%E6%96%B0%E6%89%8B%E5%85%A5%E9%96%80%20-%20%E5%81%9A%E4%B8%80%E5%80%8B%E9%AC%A7%E9%90%98%E5%90%A7/1521965944_30717.gif)

### æé†’æ™‚é–“

åˆ¤æ–·æ™‚é–“å¦‚æœç¬¦åˆæé†’ï¼Œå°±è·³å‡ºé€šçŸ¥ã€‚

\[ app.js \]

```javascript
/** Now Time */
function timer() {
    time = moment().format('HH:mm:ss')

    /** Set Now */
    nowTime = time
    elNow.innerText = time

    check()

    setTimeout(() => {
        timer()
    }, 1000)
}

/** Check Time */
function check() {
    const diff = moment(nowTime, 'HH:mm:ss').diff(moment(alarmTime, 'HH:mm:ss'))
    if (diff === 0) {
        alert('wake up!')
    }
}
```

*   åœ¨ timerÂ ä¸­å‘¼å« check

ç•¶æ™‚é–“åˆ°çš„æ™‚å€™ï¼Œæœƒè·³å‡ºè¨Šæ¯ã€‚

```bash
npm start
```

![1521966430_5416.gif](https://raw.githubusercontent.com/explooosion/blogs/refs/heads/main/docs/images/2018-03-25_Electron%20-%20%E6%96%B0%E6%89%8B%E5%85%A5%E9%96%80%20-%20%E5%81%9A%E4%B8%80%E5%80%8B%E9%AC%A7%E9%90%98%E5%90%A7/1521966430_5416.gif)

### é€šçŸ¥è¨Šæ¯

é€šçŸ¥çš„éƒ¨åˆ†ï¼Œå› ç‚ºåœ¨ Windows10 å¥½åƒÂ [Notification](https://developer.mozilla.org/en-US/docs/Web/API/notification)Â æœƒæœ‰é»å¤±æ•ˆå•é¡Œ ğŸ˜ªï¼Œ

åœ¨é€™é‚Šé¸ç”¨ä¸€å€‹å¥—ä»¶Â [node-notifier](https://github.com/mikaelbr/node-notifier)Â ä¾†é€²è¡Œé€šçŸ¥ã€‚

```bash
npm install --save node-notifier
```

\[ app.js \]

```javascript
const notifier = require('node-notifier')
const path = require('path')
```
```javascript
/** Check Time */
function check() {
    const diff = moment(nowTime, 'HH:mm:ss').diff(moment(alarmTime, 'HH:mm:ss'))
    if (diff === 0) {
        const msg = "It's" + alarmTime + ". Wake Up!"
        /** const msg = `It's ${alarmTime}. Wake Up!` */
        notice(msg)
    }
}

/**
 * System Notification
 * @param {string} msg
 */
function notice(msg) {
    /** https://github.com/mikaelbr/node-notifier */
    notifier.notify({
        title: 'Alarm Clock',
        message: msg,
        icon: path.join(__dirname, 'clock.ico'),
        sound: true,
    })
}
```

ç³»çµ±é€šçŸ¥çš„åœ–ç‰‡ä½¿ç”¨ \[ clock.icoÂ \]ï¼Œè«‹[æœå°‹](https://www.google.com.tw/search?q=clock+ico&source=lnms&tbm=isch&sa=X&ved=0ahUKEwj17KS0iofaAhWKa7wKHUkcCJsQ_AUICigB&biw=1920&bih=949)åœ–ç‰‡ä¾†ç”¨å§ï¼Œ

ç•¶æ™‚é–“åˆ°çš„æ™‚å€™ï¼Œå³ä¸‹æœƒç™¼å‡ºç³»çµ±è¨Šæ¯ã€‚

![1521967826_59452.gif](https://raw.githubusercontent.com/explooosion/blogs/refs/heads/main/docs/images/2018-03-25_Electron%20-%20%E6%96%B0%E6%89%8B%E5%85%A5%E9%96%80%20-%20%E5%81%9A%E4%B8%80%E5%80%8B%E9%AC%A7%E9%90%98%E5%90%A7/1521967826_59452.gif)

### ç³»çµ±é¡¯ç¤ºåœ¨ç³»çµ±åŒ£

å¦‚æœè¦è®“ç³»çµ±é¡¯ç¤ºæ–¼å³ä¸‹ç³»çµ±åŒ£ï¼Œéœ€è¦ä½¿ç”¨ Menuã€Trayã€‚

\[ main.js \]

```javascript
const {
    app,
    BrowserWindow,
    Tray,
    Menu,
} = require('electron')
```
```javascript
function createWindow() {

    // ...

    // Create Tray
    createTray()
}

function createTray() {
    let appIcon = null
    const iconPath = path.join(__dirname, 'clock.ico')

    const contextMenu = Menu.buildFromTemplate([{
            label: 'AlarmClock',
            click() {
                win.show()
            }
        },
        {
            label: 'Quit',
            click() {
                win.removeAllListeners('close')
                win.close()
            }
        }
    ]);

    appIcon = new Tray(iconPath)
    appIcon.setToolTip('Alarm Clock')
    appIcon.setContextMenu(contextMenu)

}
```

å¯ä»¥çœ‹åˆ°å‡ºç¾åœ¨ç³»çµ±åŒ£ï¼Œè€Œä¸”ä¹Ÿæœ‰é¸å–®ã€‚

![1521968571_18483.png](https://raw.githubusercontent.com/explooosion/blogs/refs/heads/main/docs/images/2018-03-25_Electron%20-%20%E6%96%B0%E6%89%8B%E5%85%A5%E9%96%80%20-%20%E5%81%9A%E4%B8%80%E5%80%8B%E9%AC%A7%E9%90%98%E5%90%A7/1521968571_18483.png)

### ç•«é¢ç¸®å°æ™‚éš±è—

\[ main.js \]

```javascript
function createWindow() {

    // ...

    // When Window Minimize
    win.on('minimize', () => {
        win.hide()
    })

    // Create Tray
    createTray()
}
```

*   åœ¨Â [BrowserWindow](https://wizardforcel.gitbooks.io/electron-doc/content/api/browser-window.html) ä¸­ï¼Œåˆ©ç”¨ hide å°±å¯ä»¥éš±è—è¡¨å–®ã€‚

ç¸®å°çš„æ™‚å€™ï¼Œå†é»é¸ç³»çµ±åŒ£çš„ AlarmClockï¼Œå°±å¯ä»¥é¡¯ç¤ºã€‚

![1521968826_53123.png](https://raw.githubusercontent.com/explooosion/blogs/refs/heads/main/docs/images/2018-03-25_Electron%20-%20%E6%96%B0%E6%89%8B%E5%85%A5%E9%96%80%20-%20%E5%81%9A%E4%B8%80%E5%80%8B%E9%AC%A7%E9%90%98%E5%90%A7/1521968826_53123.png)

### æé†’çš„æ™‚å€™é¡¯ç¤ºè¡¨å–®

å¦‚æœå·²ç¶“éš±è—è¡¨å–®ï¼Œå¸Œæœ›æ–¼é¬§é˜éŸ¿çš„æ™‚å€™é¡¯ç¤ºè¡¨å–®ï¼Œ

å°±éœ€è¦ç”¨åˆ° [remote](https://wizardforcel.gitbooks.io/electron-doc/content/api/remote.html)ï¼Œæ‰èƒ½å¾æ¸²æŸ“å±¤åˆ°ä¸»ç¨‹å¼Â main.js é€²è¡Œé€šè¨Šã€‚

\[ app.js \]

```javascript
const remote = require('electron').remote
```
```javascript
/**
 * System Notification
 * @param {string} msg
 */
function notice(msg) {
    /** Show Form */
    const window = remote.getCurrentWindow()
    window.restore()
    window.show()

    /** https://github.com/mikaelbr/node-notifier */
    notifier.notify({
        title: 'Alarm Clock',
        message: msg,
        icon: path.join(__dirname, 'clock.ico'),
        sound: true,
    })
}
```

*   ç•¶è§¸ç™¼ notice çš„æ™‚å€™ï¼Œåˆ©ç”¨Â getCurrentWindow å–å¾—ç•¶å‰è¡¨å–®
*   é€™è£¡çš„ window.show() ç­‰æ–¼å¾ main.js é€²è¡ŒÂ win.show()

é¬§é˜éŸ¿æ™‚ï¼Œè¡¨å–®å¾éš±è—è®Šæˆé¡¯ç¤ºã€‚

![1521969324_95564.gif](https://raw.githubusercontent.com/explooosion/blogs/refs/heads/main/docs/images/2018-03-25_Electron%20-%20%E6%96%B0%E6%89%8B%E5%85%A5%E9%96%80%20-%20%E5%81%9A%E4%B8%80%E5%80%8B%E9%AC%A7%E9%90%98%E5%90%A7/1521969324_95564.gif)

å››ã€ç¨‹å¼ç·¨è­¯
------

å°‡ç¨‹å¼ç·¨è­¯æˆ exeï¼Œæˆ‘å€‘ä½¿ç”¨Â [electron-packager](https://github.com/electron-userland/electron-packager)ï¼Œ

åœ¨ package.json ä¸­ï¼Œæ–°å¢å°è£æŒ‡ä»¤ buildï¼š

```bash
npm install electron-packager --save-dev
```

\[ package.jsonÂ \]

```json
{
  "scripts": {
    "start": "electron .",
    "build": "electron-packager . AlarmClock --out AlarmClock --overwrite --platform=win32 --arch=x64 --icon=clock.ico --prune=true --squirrel-install --ignore=node_modules/electron-* --electron-version=1.7.9 --ignore=AlarmClock-win32-x64 --version-string.CompanyName=Robby --version-string.ProductName=AlarmClock",
  },
}
```

*   electron-packager . AlarmClockï¼šæŠŠç•¶å‰ç›®éŒ„ . æ‰“åŒ…èµ·ä¾†ï¼Œä¸¦å°‡æ‡‰ç”¨ç¨‹å¼å‘½å AlarmClock
*   \--out AlarmClockï¼šè¼¸å‡ºè³‡æ–™å¤¾æ–¼ AlarmClockï¼Œç”¢å‡ºå¾Œé è¨­è³‡æ–™å¤¾ç‚ºÂ AlarmClock-win32-x64
    
*   \--overwriteï¼šå¦‚æœå·²ç¶“å­˜åœ¨è³‡æ–™å¤¾å’Œæª”æ¡ˆï¼Œæœƒé€²è¡Œè¦†å¯«
    
*   \--platform=win32ï¼šå¹³å°ç‚º Windowsï¼ˆMac: darwin, Linux: linuxï¼‰
    
*   \--arch=x64ï¼šæ‡‰ç”¨ç¨‹å¼ 64ä½å…ƒï¼ˆia32, allï¼‰
    
*   \--icon=clock.icoï¼šæ‡‰ç”¨ç¨‹å¼ ICON
    
*   \--ignore=node\_modules/electron-\*ï¼šå¿½ç•¥çš„æª”æ¡ˆ
    
*   \--electron-version=1.7.9ï¼šelectron çš„æ ¸å¿ƒç‰ˆæœ¬
    
*   \--version-string.CompanyName=Robbyï¼šè»Ÿé«”å…¬å¸åç¨±ï¼ˆé¡¯ç¤ºæ–¼è»Ÿé«”è³‡è¨Šä¸­ï¼‰
    
*   \--version-string.ProductName=AlarmClockï¼šè»Ÿé«”åç¨±ï¼ˆé¡¯ç¤ºæ–¼è»Ÿé«”è³‡è¨Šä¸­ï¼‰
    

è©¦è‘—ç·¨è­¯çœ‹çœ‹ã€‚

```bash
npm run build
```

æ‡‰ç”¨ç¨‹å¼å°±å¯ä»¥ç›´æ¥åŸ·è¡Œäº†ï¼

![1521970031_09601.png](https://raw.githubusercontent.com/explooosion/blogs/refs/heads/main/docs/images/2018-03-25_Electron%20-%20%E6%96%B0%E6%89%8B%E5%85%A5%E9%96%80%20-%20%E5%81%9A%E4%B8%80%E5%80%8B%E9%AC%A7%E9%90%98%E5%90%A7/1521970031_09601.png)

äº”ã€ç¨‹å¼å°è£
------

å¦‚æœæƒ³å°‡ç¨‹å¼å°è£èµ·ä¾†ï¼Œè®Šæˆå®‰è£ç‰ˆï¼Œ

é€™è£¡åˆ†äº«ä¸€å€‹å¥—ä»¶Â [grunt-electron-installer](https://github.com/electron-archive/grunt-electron-installer)ï¼Œ

ç”±æ–¼è©²å°è£å·¥å…·æ˜¯é€é [grunt](https://gruntjs.com/) é‹è¡Œï¼Œæ‰€ä»¥ä¸€ä½µå®‰è£ã€‚

```bash
npm install --save-dev grunt
```
```bash
npm install --save-dev grunt-electron-installer
```

åœ¨æ ¹ç›®éŒ„ä¸­å»ºç«‹æª”æ¡ˆã€‚

\[ Gruntfile.jsÂ \]

```javascript
var grunt = require('grunt');

grunt.config.init({
    pkg: grunt.file.readJSON('./AlarmClock/package.json'),
    'create-windows-installer': {
        ia32: {
            appDirectory: './AlarmClock/AlarmClock-win32-x64',
            outputDirectory: './AlarmClock/installer64',
            authors: 'Robby',
            title: 'AlarmClock',
            exe: 'AlarmClock.exe',
            description: 'alarm clock',
            noMsi: true,
            loadingGif: 'clock.ico',
            setupIcon: 'clock.ico',
            icon: 'clock.ico',
        }
    }
})

grunt.loadNpmTasks('grunt-electron-installer');
grunt.registerTask('default', ['create-windows-installer']);
```

*   AlarmClock/package.jsonï¼šé€™å€‹æª”æ¡ˆç­‰ç­‰æˆ‘å€‘åœ¨è¼¸å‡ºçš„è³‡æ–™å¤¾ä¸­ AlarmClock æ”¾ç½®
*   create-windows-installerï¼šgrunt çš„ä»»å‹™åç¨±
*   appDirectory: æª”æ¡ˆä¾†æºï¼ˆéœ€è¦å…ˆä½¿ç”¨ electron-packagerï¼‰
*   outputDirectory: è¼¸å‡ºè³‡æ–™å¤¾
*   authors: ä½œè€…
*   title: æ‡‰ç”¨ç¨‹å¼æ¨™é¡Œ
*   exe: æ‡‰ç”¨ç¨‹å¼åç¨±
*   description: æ‡‰ç”¨ç¨‹å¼æè¿°ï¼ˆå¯å¿½ç•¥ï¼‰
*   noMsi: æ˜¯å¦æä¾›MISæª”ï¼ˆå¯å¿½ç•¥ï¼Œé è¨­ trueï¼‰
*   loadingGif: åŸ·è¡Œæ™‚çš„åœ–ç‰‡ï¼ˆå¯å¿½ç•¥ï¼‰
*   setupIcon: å®‰è£éšæ®µæ™‚çš„åœ–ç‰‡ï¼ˆå¯å¿½ç•¥ï¼‰
*   icon: ICONåœ–ç‰‡

\[ AlarmClock /Â package.jsonÂ \]

æ¥è‘—åˆ°è¼¸å‡ºè³‡æ–™å¤¾çš„åœ°æ–¹å»ºç«‹ package.json è»Ÿé«”è³‡è¨Šã€‚

```json
{
    "name": "AlarmClock",
    "version": "1.0.0"
}
```

*   nameï¼šè»Ÿé«”åç¨±
*   versionï¼šè»Ÿé«”ç‰ˆæœ¬

å¦‚æœæ€•æ··æ·†ï¼Œåœ¨AlarmClock ä¸­çš„ package.json æ˜¯å¯ä»¥æ”¹åçš„ï¼Œè«‹æ³¨æ„Â Gruntfile.js æ‰€æŒ‡å®šçš„æª”å

æª”æ¡ˆçµæ§‹ä¸Šå¦‚ä¸‹ï¼š

![1521970721_41565.png](https://raw.githubusercontent.com/explooosion/blogs/refs/heads/main/docs/images/2018-03-25_Electron%20-%20%E6%96%B0%E6%89%8B%E5%85%A5%E9%96%80%20-%20%E5%81%9A%E4%B8%80%E5%80%8B%E9%AC%A7%E9%90%98%E5%90%A7/1521970721_41565.png)

æ¥è‘—åœ¨æ ¹çš„ package.json ä¸­ï¼Œæ–°å¢å°è£æŒ‡ä»¤ packï¼š

\[Â package.jsonÂ \]

```json
{
  "scripts": {
    "start": "electron .",
    "build": "electron-packager . AlarmClock --out AlarmClock --overwrite --platform=win32 --arch=x64 --icon=clock.ico --prune=true --squirrel-install --ignore=node_modules/electron-* --electron-version=1.7.9 --ignore=AlarmClock-win32-x64 --version-string.CompanyName=Robby --version-string.ProductName=AlarmClock",
    "pack": "grunt"
  },
}
```

è©¦è‘—å°è£æª”æ¡ˆ ğŸ“¦ã€‚

```bash
npm run pack
```

å®Œæˆå¾Œæœƒå‡ºç¾ **Done.**

[![1521971120_53832.png](https://raw.githubusercontent.com/explooosion/blogs/refs/heads/main/docs/images/2018-03-25_Electron%20-%20%E6%96%B0%E6%89%8B%E5%85%A5%E9%96%80%20-%20%E5%81%9A%E4%B8%80%E5%80%8B%E9%AC%A7%E9%90%98%E5%90%A7/1521971120_53832.png)](https://dotblogsfile.blob.core.windows.net/user/incredible/1727f7ce-7c50-4b56-abf4-200dd2307a1a/1521971120_53832.png)

å¯ä»¥åœ¨è¼¸å‡ºçš„è³‡æ–™å¤¾ AlarmClock / installer64 çœ‹åˆ°Â ğŸ‘€

![1521971228_60396.png](https://raw.githubusercontent.com/explooosion/blogs/refs/heads/main/docs/images/2018-03-25_Electron%20-%20%E6%96%B0%E6%89%8B%E5%85%A5%E9%96%80%20-%20%E5%81%9A%E4%B8%80%E5%80%8B%E9%AC%A7%E9%90%98%E5%90%A7/1521971228_60396.png)

![1521971247_99854.png](https://raw.githubusercontent.com/explooosion/blogs/refs/heads/main/docs/images/2018-03-25_Electron%20-%20%E6%96%B0%E6%89%8B%E5%85%A5%E9%96%80%20-%20%E5%81%9A%E4%B8%80%E5%80%8B%E9%AC%A7%E9%90%98%E5%90%A7/1521971247_99854.png)

![1521971269_4781.png](https://raw.githubusercontent.com/explooosion/blogs/refs/heads/main/docs/images/2018-03-25_Electron%20-%20%E6%96%B0%E6%89%8B%E5%85%A5%E9%96%80%20-%20%E5%81%9A%E4%B8%80%E5%80%8B%E9%AC%A7%E9%90%98%E5%90%A7/1521971269_4781.png)

å®‰è£å¾Œçš„è·¯å¾‘æœƒåˆ°å“ªï¼Ÿ

C:\\Users\\ { ç”¨æˆ¶åç¨± } \\AppData\\Local\\electron-alarm-clock

[![1521971405_28151.png](https://raw.githubusercontent.com/explooosion/blogs/refs/heads/main/docs/images/2018-03-25_Electron%20-%20%E6%96%B0%E6%89%8B%E5%85%A5%E9%96%80%20-%20%E5%81%9A%E4%B8%80%E5%80%8B%E9%AC%A7%E9%90%98%E5%90%A7/1521971405_28151.png)](https://dotblogsfile.blob.core.windows.net/user/incredible/1727f7ce-7c50-4b56-abf4-200dd2307a1a/1521971405_28151.png)

å…­ã€å»ºç«‹æ¡Œé¢æ·å¾‘
--------

é¿å…ç¨‹å¼æœ‰æ¬Šé™çš„å•é¡Œï¼Œé è¨­éƒ½æ˜¯å®‰è£åœ¨ AppData / Localï¼Œ

ç”±æ–¼é€éå°è£çš„æ–¹å¼å®‰è£ï¼Œæœƒç™¼ç¾ç¨‹å¼çš„è·¯å¾‘å¤ªé•·äº† ğŸ˜±ã€‚

é¿å…é€™æ¨£ï¼Œ

å¯ä»¥åœ¨ç¨‹å¼å®‰è£éšæ®µé€²è¡Œæ·å¾‘çš„å»ºç«‹ï¼Œ

ä¸¦ä¸”åœ¨ç§»é™¤éšæ®µè‡ªå‹•åœ°å°‡æ·å¾‘åˆªé™¤ã€‚

\[Â main.jsÂ \]

```javascript
/** Please Set To The Top */
if (handleSquirrelEvent()) {
    return;
}
```
```javascript
function handleSquirrelEvent() {
    if (process.argv.length === 1) {
        return false;
    }

    const appFolder = path.resolve(process.execPath, '..');
    const rootAtomFolder = path.resolve(appFolder, '..');
    const updateDotExe = path.resolve(path.join(rootAtomFolder, 'Update.exe'));
    const exeName = path.basename(process.execPath);

    const spawn = function (command, args) {
        let spawnedProcess;

        try {
            spawnedProcess = ChildProcess.spawn(command, args, {
                detached: true
            });
        } catch (error) {}

        return spawnedProcess;
    };

    const spawnUpdate = function (args) {
        return spawn(updateDotExe, args);
    };

    const squirrelEvent = process.argv[1];
    switch (squirrelEvent) {
        case '--squirrel-install':
        case '--squirrel-updated':
            spawnUpdate(['--createShortcut', exeName]);
            setTimeout(app.quit, 1000);
            return true;

        case '--squirrel-uninstall':

            spawnUpdate(['--removeShortcut', exeName]);
            setTimeout(app.quit, 1000);
            return true;

        case '--squirrel-obsolete':
            app.quit();
            return true;
    }
}
```

é€™å€‹æ–¹å¼æ˜¯åˆ©ç”¨Â [windows-installer](http://windows-installer)ï¼Œ

ç”±æ–¼å®ƒå·²ç¶“è¢«å°è£åœ¨Â [electron-packager](https://github.com/electron-userland/electron-packager)ï¼Œå› æ­¤ä¸éœ€è¦å¦å¤–å®‰è£ï¼Œç›´æ¥èª¿ç”¨å³å¯ ğŸ˜ã€‚

å®Œæ•´å°ˆæ¡ˆæ”¾ç½®æ–¼ Github -Â [electron-alarm-clock](https://github.com/explooosion/electron-alarm-clock)

ä¸ƒã€åƒè€ƒè³‡æ–™
------

*   [Electron ä¸­æ–‡æ–‡æ¡£](https://wizardforcel.gitbooks.io/electron-doc/content/)
*   [å¸¸ç”¨Electron Appæ‰“åŒ…å·¥å…·](https://www.jianshu.com/p/1c2ad78df208)
    
*   [æ‰‹æŠŠæ‰‹æ•™ä½ æŠŠå‰ç«¯ä»£ç æ‰“åŒ…æˆ msi å’Œ exe æ–‡ä»¶](https://juejin.im/entry/5805e39ad20309006854e58f)
    
*   [\[Node.js\] Electron ç™¼ä½ˆæˆå¯åŸ·è¡Œæª” APP](http://rpg1982.blogspot.tw/2015/12/nodejs-electron-app.html)
    

ä½ å¯èƒ½æœƒæœ‰å€‹ç–‘æƒ‘...

æ€ä»–åª½çš„æª”æ¡ˆé€™éº¼å¤§Â ğŸ‘ğŸ‘½ğŸ¤–ğŸ’©ğŸ¤¬
--------------------

Â â†’Â [The package is too bigã€‚Â #2878](https://github.com/electron/electron/issues/2878)

æœ‰å‹˜èª¤ä¹‹è™•ï¼Œä¸åæŒ‡æ•™ã€‚ob'\_'ov